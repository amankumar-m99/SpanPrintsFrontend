<div class="container d-flex justify-content-center align-items-center vh-100">
    @if(!isTokenVerified){
    <div class="fs-2 me-2">
        Verifying token. Please wait.
    </div>
    <div class="spinner-border text-primary" role="status"></div>
    }
    @else if(!isTokenValid) {
    <div class="alert alert-danger">
        <p><strong>Invalid Token</strong></p>
        <p>{{message}}</p>
    </div>
    }
    @else {
    <div class="card shadow p-4" style="max-width: 400px; width: 100%;">
        <!-- Logo -->
        <div class="text-center mb-3">
            <img src="logo/logo_with_text_bg_no.png" alt="App Logo" class="img-fluid" style="max-height: 100px;">
        </div>

        <h3 class="text-center mb-4">Reset Password</h3>
        <form [formGroup]="form" (ngSubmit)="submit()">
            <!-- New Password -->
            <div class="mb-3">
                <label for="email" class="form-label"><i class="bi bi-person me-1"></i>New Password</label>
                <input type="email" id="email" class="form-control"
                    [ngClass]="{ 'is-invalid': password?.invalid && password?.touched }" formControlName="password" />
                <div class="invalid-feedback" *ngIf="password?.errors?.['required']">Password is required.</div>
                <div class="invalid-feedback" *ngIf="password?.errors?.['pattern']">
                    Password must be 8+ chars, include upper, lower, number, special char.
                </div>
            </div>
            <!-- Confirm Password -->
            <div class="mb-3">
                <label for="email" class="form-label"><i class="bi bi-person me-1"></i>Confirm Password</label>
                <input type="email" id="email" class="form-control"
                    [ngClass]="{ 'is-invalid': confirmPassword?.invalid && confirmPassword?.touched }"
                    formControlName="confirmPassword" />
                <div class="invalid-feedback" *ngIf="confirmPassword?.errors?.['required']">
                    Confirm password is required.
                </div>
            </div>
            <!-- Submit/Login Button -->
            <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-primary" [disabled]="loading">
                    @if(!loading){
                    <span>Submit</span>
                    }
                    @else {
                    <span class="spinner-border spinner-border-sm me-1"></span>
                    <span>Submitting...</span>
                    }
                </button>
            </div>
        </form>
        <!-- Message -->
        <p class="mt-3 alert" [ngClass]="alertClass" *ngIf="message">
            {{ message }}
        </p>
    </div>
    }
</div>